<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dark Code Test</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
</head>

<body>
  <header class="topbar">
    <div class="logo">DC</div>
    <div class="brand">
      <div class="name">Dark Code Test</div>
      <div class="sub">محرر HTML/CSS/JS + معاينة مباشرة</div>
    </div>

    <div class="spacer"></div>

    <div class="toolbar">
      <button class="btn primary" id="runBtn" title="تشغيل (Ctrl+Enter)">تشغيل</button>

      <button class="btn" id="saveBtn" title="حفظ (Ctrl+S)">حفظ</button>
      <button class="btn" id="exportBtn" title="تصدير مشروع JSON">تصدير</button>
      <button class="btn" id="importProjectBtn" title="استيراد مشروع JSON">استيراد مشروع</button>

      <button class="btn" id="importCodeBtn" title="استيراد ملف كود (Ctrl+O)">استيراد كود</button>
      <button class="btn" id="addAssetBtn" title="إضافة ملفات للمشروع (Ctrl+Shift+O)">ملفات +</button>

      <button class="btn danger" id="resetBtn" title="مسح كل شيء">مسح</button>
      <button class="btn help" id="helpBtn" title="مساعدة (F1 أو Ctrl+K)">؟</button>
    </div>
  </header>

  <main class="layout">
    <section class="left">
      <div class="tabs">
        <button class="tab active" data-tab="html">HTML</button>
        <button class="tab" data-tab="css">CSS</button>
        <button class="tab" data-tab="js">JS</button>
        <button class="tab" data-tab="files">Files</button>
      </div>

      <div class="editorWrap">
        <textarea id="htmlEditor" class="editor" spellcheck="false"></textarea>
        <textarea id="cssEditor" class="editor" spellcheck="false" hidden></textarea>
        <textarea id="jsEditor" class="editor" spellcheck="false" hidden></textarea>

        <div id="filesPanel" class="filesPanel" hidden>
          <div class="filesHead">
            <div class="filesTitle">ملفات المشروع (Assets)</div>
            <div class="filesNote">CSS/JS تنحقن داخل المعاينة تلقائيًا</div>
          </div>
          <div id="filesList" class="filesList"></div>
        </div>
      </div>

      <div class="statusbar">
        <div class="status" id="statusText">جاهز</div>
        <div class="statusRight">
          <label class="check">
            <input type="checkbox" id="autoRun" checked />
            <span>تحديث مباشر</span>
          </label>
          <span class="dotSep">•</span>
          <span class="hint">مساعدة: F1 أو Ctrl+K</span>
        </div>
      </div>
    </section>

    <div class="splitter" id="splitter" title="اسحب للتوسيع"></div>

    <section class="right">
      <div class="previewHead">
        <div class="previewTitle">المعاينة</div>
        <div class="previewHint">Tajawal + Console داخل المعاينة</div>
      </div>
      <iframe id="preview" sandbox="allow-scripts allow-modals" referrerpolicy="no-referrer"></iframe>
    </section>
  </main>

  <!-- Inputs -->
  <input id="importCodeInput" type="file" hidden accept=".html,.htm,.css,.js,.txt">
  <input id="assetsInput" type="file" hidden multiple accept=".css,.js,.txt,.json">
  <input id="importProjectInput" type="file" hidden accept=".json">

  <!-- Help Modal -->
  <div class="modalBackdrop" id="helpBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalHead">
        <div>
          <div class="modalTitle">الاختصارات + الأدوات السريعة</div>
          <div class="modalSub">إغلاق: Esc — تشغيل: Ctrl+Enter — بديل المساعدة: Ctrl+K</div>
        </div>
        <button class="btn" id="closeHelpBtn">إغلاق</button>
      </div>

      <div class="modalBody">
        <div class="grid2">
          <div class="card">
            <div class="cardTitle">اختصارات</div>
            <div class="rows">
              <div class="row"><span>تشغيل</span><span class="kbd">Ctrl</span><span class="kbd">Enter</span></div>
              <div class="row"><span>حفظ</span><span class="kbd">Ctrl</span><span class="kbd">S</span></div>
              <div class="row"><span>استيراد كود</span><span class="kbd">Ctrl</span><span class="kbd">O</span></div>
              <div class="row"><span>إضافة ملفات</span><span class="kbd">Ctrl</span><span class="kbd">Shift</span><span class="kbd">O</span></div>
              <div class="row"><span>مساعدة</span><span class="kbd">F1</span> <span class="kbd">Ctrl</span><span class="kbd">K</span></div>
              <div class="row"><span>إغلاق المساعدة</span><span class="kbd">Esc</span></div>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">ملاحظات مهمة</div>
            <div class="p">
              - بعض المتصفحات تمنع F1 لأنها للمساعدة الافتراضية، لذلك وفرنا Ctrl+K.<br>
              - لو كنت فاتح الموقع داخل iframe داخل موقع ثاني: “اختيار الملفات” ممكن ينمنع حسب إعدادات الموقع.
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardTitle">أدوات ملفات (Assets)</div>
          <div class="p">
            من تبويب Files تقدر تشوف الملفات وتعدلها/تحذفها. ملفات CSS و JS تشتغل داخل المعاينة مباشرة.
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
